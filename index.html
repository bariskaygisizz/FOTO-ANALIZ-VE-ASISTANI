<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>AI FotoÄŸraf Analiz & Ã–neri AsistanÄ±</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    body {
      background: #020617;
      color: #e5e7eb;
    }
    header {
      background: #0f172a;
      border-bottom: 1px solid #1f2937;
      padding: 1rem;
      text-align: center;
    }
    header h1 {
      font-size: 1.3rem;
      margin-bottom: 0.25rem;
    }
    header p {
      font-size: 0.75rem;
      color: #9ca3af;
    }
    main {
      max-width: 960px;
      margin: 0 auto;
      padding: 1rem;
    }
    .card {
      background: #020617;
      border-radius: 0.75rem;
      border: 1px solid #1f2937;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    h2 {
      font-size: 1.05rem;
      margin-bottom: 0.5rem;
    }
    .desc {
      font-size: 0.85rem;
      color: #9ca3af;
      margin-bottom: 0.75rem;
    }
    input[type="file"] {
      margin-top: 0.5rem;
      padding: 0.35rem;
      font-size: 0.85rem;
    }
    select, button {
      padding: 0.45rem 0.75rem;
      border-radius: 999px;
      border: 1px solid #475569;
      background: #0f172a;
      color: #e5e7eb;
      font-size: 0.85rem;
      margin-top: 0.5rem;
    }
    button {
      border-color: #22c55e;
      background: #16a34a;
      cursor: pointer;
    }
    button:hover {
      background: #15803d;
    }
    .flex {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .preview-box {
      flex: 1 1 260px;
    }
    .preview-box img {
      max-width: 100%;
      border-radius: 0.75rem;
      border: 1px solid #1f2937;
      margin-top: 0.75rem;
    }
    .result-box {
      flex: 2 1 320px;
    }
    .badge {
      display: inline-block;
      padding: 0.25rem 0.6rem;
      border-radius: 999px;
      border: 1px solid #334155;
      background: #020617;
      font-size: 0.75rem;
      margin: 0.15rem;
    }
    .badge.good {
      border-color: #22c55e;
      color: #bbf7d0;
    }
    .badge.warn {
      border-color: #eab308;
      color: #fef9c3;
    }
    .badge.info {
      border-color: #38bdf8;
      color: #bae6fd;
    }
    .small {
      font-size: 0.75rem;
      color: #6b7280;
    }
    .result-section h3 {
      font-size: 0.95rem;
      margin-top: 0.6rem;
      margin-bottom: 0.2rem;
    }
    .result-section p {
      font-size: 0.85rem;
      line-height: 1.4;
      margin-bottom: 0.4rem;
    }
    @media (max-width: 720px) {
      .flex {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>AI FotoÄŸraf Analiz & Ã–neri AsistanÄ±</h1>
    <p>Teknik kalite + stil + bakÄ±m + ortam + duruÅŸ iÃ§in akÄ±llÄ±, pozitif Ã¶neriler</p>
  </header>

  <main>
    <!-- AÃ§Ä±klama -->
    <section class="card">
      <h2>NasÄ±l Ã§alÄ±ÅŸÄ±yor?</h2>
      <p class="desc">
        FotoÄŸraf yÃ¼klÃ¼yorsun, sistem fotoÄŸrafÄ±n <strong>teknik Ã¶zelliklerine</strong> (Ã¶zellikle parlaklÄ±k & kontrast) bakarak
        sana stil, bakÄ±m, ortam ve duruÅŸ iÃ§in pozitif Ã¶neriler gÃ¶steriyor.<br />
        <span class="small">
          Not: TarayÄ±cÄ± iÃ§inde gerÃ§ek bir bÃ¼yÃ¼k yapay zekÃ¢ modeli Ã§alÄ±ÅŸmadÄ±ÄŸÄ± iÃ§in bu sistem fotoÄŸrafÄ± â€œgerÃ§ekten tanÄ±mazâ€,
          sadece teknik verileri kullanÄ±p akÄ±llÄ±, genel tavsiyeler Ã¼retir. Ä°stersen bu iskelete sonradan bir AI API baÄŸlayabilirsin.
        </span>
      </p>
    </section>

    <!-- YÃ¼kleme + mod seÃ§imi -->
    <section class="card">
      <h2>1) FotoÄŸrafÄ±nÄ± yÃ¼kle ve analiz tÃ¼rÃ¼nÃ¼ seÃ§</h2>
      <p class="desc">
        Sadece <strong>fotoÄŸraf</strong> yÃ¼kle (selfie, boydan, dÄ±ÅŸ mekÃ¢n vs.). Sonra analiz modunu seÃ§:
        sadece stil, sadece kalite veya <strong>hepsi birden</strong>.
      </p>

      <input type="file" id="fileInput" accept="image/*" />
      <br />
      <label for="modeSelect" class="small">Analiz modu:</label><br />
      <select id="modeSelect">
        <option value="all">Hepsi (tavsiye paketi)</option>
        <option value="quality">FotoÄŸraf teknik kalitesi</option>
        <option value="style">Stil & kombin Ã¶nerileri</option>
        <option value="care">BakÄ±m & tarz Ã¶nerileri</option>
        <option value="background">Arka plan & Ä±ÅŸÄ±k analizi</option>
        <option value="posture">DuruÅŸ & karizma tavsiyeleri</option>
      </select>
      <br />
      <button id="analyzeBtn">Analiz Et</button>
    </section>

    <!-- Ã–nizleme + sonuÃ§lar -->
    <section class="card">
      <div class="flex">
        <div class="preview-box">
          <h2>FotoÄŸraf Ã–nizleme</h2>
          <div id="previewInfo" class="small" style="margin-top:0.4rem;">
            HenÃ¼z fotoÄŸraf seÃ§medin.
          </div>
          <img id="previewImg" alt="" style="display:none;" />
        </div>
        <div class="result-box">
          <h2>AI Analiz & Ã–neriler</h2>
          <div id="badges"></div>
          <div id="results" class="result-section" style="margin-top:0.5rem;">
            <p class="small">
              Analiz henÃ¼z yapÄ±lmadÄ±. FotoÄŸraf seÃ§ip â€œAnaliz Etâ€ butonuna bas.
            </p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Gizli canvas: sadece parlaklÄ±k/kontrast hesaplamak iÃ§in -->
  <canvas id="hiddenCanvas" style="display:none;"></canvas>

  <script>
    const fileInput = document.getElementById("fileInput");
    const previewImg = document.getElementById("previewImg");
    const previewInfo = document.getElementById("previewInfo");
    const analyzeBtn = document.getElementById("analyzeBtn");
    const modeSelect = document.getElementById("modeSelect");
    const badgesDiv = document.getElementById("badges");
    const resultsDiv = document.getElementById("results");
    const canvas = document.getElementById("hiddenCanvas");
    const ctx = canvas.getContext("2d");

    let currentImage = null;

    fileInput.addEventListener("change", handleFile);
    analyzeBtn.addEventListener("click", analyze);

    function handleFile(e) {
      const file = e.target.files[0];
      if (!file) {
        previewImg.style.display = "none";
        previewInfo.textContent = "FotoÄŸraf seÃ§ilmedi.";
        currentImage = null;
        return;
      }

      const url = URL.createObjectURL(file);
      const img = new Image();
      img.onload = function () {
        currentImage = img;
        previewImg.src = url;
        previewImg.style.display = "block";
        previewInfo.textContent =
          "Boyut: " + img.width + " x " + img.height + " piksel";

        URL.revokeObjectURL(url);
      };
      img.src = url;
    }

    function analyze() {
      if (!currentImage) {
        alert("LÃ¼tfen Ã¶nce bir fotoÄŸraf yÃ¼kle.");
        return;
      }

      // GÃ¶rÃ¼ntÃ¼yÃ¼ canvasa Ã§iz ve parlaklÄ±k / basit kontrast hesapla
      const maxWidth = 400;
      const scale = Math.min(maxWidth / currentImage.width, 1);
      const w = Math.floor(currentImage.width * scale);
      const h = Math.floor(currentImage.height * scale);
      canvas.width = w;
      canvas.height = h;
      ctx.drawImage(currentImage, 0, 0, w, h);
      const imgData = ctx.getImageData(0, 0, w, h);
      const stats = calcStats(imgData.data);

      // Teknik kalite puanÄ± Ã¼ret
      const quality = makeQualityScore(stats);
      const mode = modeSelect.value;

      // Etiketleri ve metni sÄ±fÄ±rla
      badgesDiv.innerHTML = "";
      resultsDiv.innerHTML = "";

      // Modlara gÃ¶re analiz yaz
      if (mode === "all" || mode === "quality") {
        renderQuality(quality, stats);
      }
      if (mode === "all" || mode === "style") {
        renderStyleAdvice(quality, stats);
      }
      if (mode === "all" || mode === "care") {
        renderCareAdvice(quality, stats);
      }
      if (mode === "all" || mode === "background") {
        renderBackgroundAdvice(quality, stats);
      }
      if (mode === "all" || mode === "posture") {
        renderPostureAdvice(quality, stats);

      }

      if (!resultsDiv.innerHTML.trim()) {
        resultsDiv.innerHTML =
          "<p class='small'>Analiz sonucu oluÅŸturulamadÄ±.</p>";
      }
    }

    // Piksel verisinden basit istatistikler (parlaklÄ±k ortalamasÄ± ve varyansÄ±)
    function calcStats(data) {
      let sum = 0;
      let sumSq = 0;
      let count = 0;

      for (let i = 0; i < data.length; i += 4) {
        const r = data[i];
        const g = data[i + 1];
        const b = data[i + 2];
        // Luma yaklaÅŸÄ±k: 0.299R + 0.587G + 0.114B
        const lum = 0.299 * r + 0.587 * g + 0.114 * b;
        sum += lum;
        sumSq += lum * lum;
        count++;
      }

      const mean = sum / count;
      const variance = sumSq / count - mean * mean;
      const std = Math.sqrt(Math.max(variance, 0));

      return { mean, std };
    }

    // Basit teknik kalite puanÄ± 1â€“10
    function makeQualityScore(stats) {
      const { mean, std } = stats;
      // 0-255 arasÄ± parlaklÄ±k. 90-190 arasÄ± ideal sayalÄ±m
      let brightnessScore;
      if (mean < 60) brightnessScore = 3;
      else if (mean < 90) brightnessScore = 5;
      else if (mean < 190) brightnessScore = 8;
      else if (mean < 220) brightnessScore = 6;
      else brightnessScore = 3;

      // Kontrast (std). Ã‡ok dÃ¼ÅŸÃ¼kse dÃ¼z, Ã§ok yÃ¼ksekse aÅŸÄ±rÄ± sert
      let contrastScore;
      if (std < 20) contrastScore = 3;
      else if (std < 45) contrastScore = 7;
      else if (std < 70) contrastScore = 8;
      else contrastScore = 5;

      // Basit ortalama
      return Math.round((brightnessScore + contrastScore) / 2);
    }

    function addBadge(text, type = "info") {
      const span = document.createElement("span");
      span.className = "badge " + type;
      span.textContent = text;
      badgesDiv.appendChild(span);
    }

    function appendResult(html) {
      const div = document.createElement("div");
      div.innerHTML = html;
      resultsDiv.appendChild(div);
    }

    // --- Analiz parÃ§alarÄ± ---

    function renderQuality(quality, stats) {
      addBadge("FotoÄŸraf kalitesi: " + quality + "/10", quality >= 7 ? "good" : "warn");

      let levelText;
      if (quality >= 8) {
        levelText =
          "Teknik olarak gayet iyi bir fotoÄŸraf. IÅŸÄ±k ve kontrast gayet dengeli gÃ¶rÃ¼nÃ¼yor.";
      } else if (quality >= 6) {
        levelText =
          "FotoÄŸrafÄ±n teknik kalitesi fena deÄŸil, ama bir tÄ±k daha iyi Ä±ÅŸÄ±k veya kontrastla daha profesyonel durabilir.";
      } else {
        levelText =
          "Teknik kalite dÃ¼ÅŸÃ¼k gÃ¶rÃ¼nÃ¼yor. IÅŸÄ±k yetersiz veya Ã§ok sert olabilir; basit dokunuÅŸlarla fotoÄŸrafÄ±nÄ± ciddi ÅŸekilde iyileÅŸtirebilirsin.";
      }

      appendResult(`
        <h3>ğŸ“¸ FotoÄŸraf Teknik Kalitesi</h3>
        <p>${levelText}</p>
        <p class="small">
          Ortalama parlaklÄ±k (0â€“255): ${stats.mean.toFixed(1)}<br>
          Basit kontrast (standart sapma): ${stats.std.toFixed(1)}
        </p>
        <p class="small">
          Ä°pucu: DoÄŸrudan tavana deÄŸil, <strong>yan taraftan gelen yumuÅŸak Ä±ÅŸÄ±k</strong> genelde en iyi sonucu verir.
          MÃ¼mkÃ¼nse pencere kenarÄ± + sade arka plan kullan.
        </p>
      `);
    }

    function renderStyleAdvice(quality, stats) {
      addBadge("Stil & kombin Ã¶nerileri hazÄ±r", "info");

      appendResult(`
        <h3>ğŸ‘• Stil & Kombin Ã–nerileri</h3>
        <p>
          FotoÄŸrafÄ±n teknik kalitesine bakÄ±nca, kombinlerini biraz daha Ã¶n plana Ã§Ä±karacak
          bir dÃ¼zenleme iÅŸini gÃ¶rebilir. 
          EÄŸer Ã¼stÃ¼ne koyu tonlar giyiyorsan, arka planÄ± biraz daha aÃ§Ä±k; aÃ§Ä±k tonlar giyiyorsan 
          arka planÄ± biraz daha koyu seÃ§mek, seni daha net ortaya Ã§Ä±karÄ±r.
        </p>
        <p>
          Temel kombin tÃ¼yosu:
          <ul class="small">
            <li>2 ana renk + 1 nÃ¶tr renk (siyah, beyaz, gri, bej) genelde Ã§ok temiz bir gÃ¶rÃ¼nÃ¼m verir.</li>
            <li>AyakkabÄ± rengi ile Ã¼stteki bir detayÄ± (t-shirt baskÄ±sÄ±, kapÃ¼ÅŸon, saat kayÄ±ÅŸÄ± gibi) eÅŸleÅŸtirmek gÃ¼Ã§lÃ¼ durur.</li>
            <li>Bir tÄ±k daha ciddi gÃ¶rÃ¼nmek istiyorsan, dÃ¼z t-shirt + overshirt/ceket kombinine geÃ§ebilirsin.</li>
          </ul>
        </p>
      `);
    }

    function renderCareAdvice(quality, stats) {
      addBadge("BakÄ±m & tarz Ã¶nerileri oluÅŸturuldu", "info");

      appendResult(`
        <h3>ğŸ§¼ BakÄ±m & Tarz Ã–nerileri</h3>
        <p>
          FotoÄŸrafta yÃ¼z hatlarÄ±nÄ±n net gÃ¶rÃ¼nmesi iÃ§in Ä±ÅŸÄ±k kadar bakÄ±m da Ã¶nemli. Ã‡ok abartÄ±ya gerek yok:
          dÃ¼zenli saÃ§/sakal dÃ¼zeni, temiz tÄ±rnaklar ve sade bir kokuyla bile dÄ±ÅŸarÄ±dan algÄ±n Ã§ok deÄŸiÅŸir.
        </p>
        <p class="small">
          Mini bakÄ±m rutini Ã¶nerisi:
          <ul>
            <li>GÃ¼nde 1 kez yÃ¼z yÄ±kama + basit bir nemlendirici</li>
            <li>Haftada 1 kez saÃ§/sakal ÅŸeklini kontrol (kulak Ã¼stleri, ense, bÄ±yÄ±k Ã§izgisi vs.)</li>
            <li>Ã‡Ä±kmadan Ã¶nce: ayna karÅŸÄ±sÄ±nda 5 saniye durup â€œÃœzerimde bir fazlalÄ±k var mÄ±?â€ diye bakmak</li>
          </ul>
        </p>
      `);
    }

    function renderBackgroundAdvice(quality, stats) {
      addBadge("Arka plan & Ä±ÅŸÄ±k analizi", "info");

      let brightText;
      if (stats.mean < 80) {
        brightText =
          "FotoÄŸraf genel olarak karanlÄ±k tarafta. Arka planda ne olduÄŸu Ã§ok seÃ§ilmiyor olabilir. Daha aydÄ±nlÄ±k bir duvar veya pencereye yakÄ±n bir konumda Ã§ekersen hem sen hem ortam daha net gÃ¶rÃ¼nÃ¼r.";
      } else if (stats.mean > 200) {
        brightText =
          "FotoÄŸraf biraz fazla aydÄ±nlÄ±k olabilir; beyaz alanlar patlÄ±yormuÅŸ gibi gÃ¶rÃ¼nebilir. Bir tÄ±k daha gÃ¶lgeli veya dolaylÄ± Ä±ÅŸÄ±k ortamÄ±, detaylarÄ± daha net gÃ¶sterir.";
      } else {
        brightText =
          "IÅŸÄ±k seviyesi fena gÃ¶rÃ¼nmÃ¼yor. Bundan sonraki asÄ±l farkÄ± arka planÄ±n sadeliÄŸi ve renk uyumu yaratacaktÄ±r.";
      }

      appendResult(`
        <h3>ğŸ’¡ Arka Plan & IÅŸÄ±k</h3>
        <p>${brightText}</p>
        <p class="small">
          Arka plan iÃ§in temel tÃ¼yolar:
          <ul>
            <li>DaÄŸÄ±nÄ±k raflar, Ã§amaÅŸÄ±r askÄ±sÄ±, kalabalÄ±k detaylar: mÃ¼mkÃ¼nse kadrajdan Ã§Ä±kar.</li>
            <li>DÃ¼z bir duvar, perde veya sade bir kÃ¶ÅŸe, seni Ã¶n plana Ã§Ä±karÄ±r.</li>
            <li>Telefonu biraz gÃ¶z hizasÄ±ndan, yÃ¼zÃ¼ne 45 derece aÃ§Ä±yla tutmak genelde en iyi sonucu verir.</li>
          </ul>
        </p>
      `);
    }

    function renderPostureAdvice(quality, stats) {
      addBadge("DuruÅŸ & karizma tavsiyeleri", "good");

      appendResult(`
        <h3>ğŸ’¬ DuruÅŸ & Karizma Tavsiyeleri</h3>
        <p>
          Karizma Ã§oÄŸu zaman â€œdenk gelen tek gÃ¼zel fotoâ€ deÄŸil, <strong>enerji + duruÅŸ + bakÄ±ÅŸ</strong> Ã¼Ã§lÃ¼sÃ¼nÃ¼n toplamÄ±dÄ±r.
          FotoÄŸraf Ã§ekerken:
        </p>
        <p class="small">
          <ul>
            <li>OmuzlarÄ± Ã§ok kasmadan, hafif geride ve rahat tutmak</li>
            <li>Ã‡eneyi Ã§ok yukarÄ± deÄŸil, hafif aÅŸaÄŸÄ±â€“ileri konumda tutmak</li>
            <li>GÃ¶zleri tam kameraya kilitlemek yerine, Ã§ok az yanÄ±na bakmak (doÄŸal bir ifade verir)</li>
            <li>GerÃ§ekten sevdiÄŸin bir ÅŸey dÃ¼ÅŸÃ¼nerek hafif gÃ¼lÃ¼msemek (zorla deÄŸil)</li>
          </ul>
        </p>
        <p>
          Bu fotoÄŸraf tek baÅŸÄ±na seni tarif etmiyor; sadece bir kare.
          Ã–nemli olan, zaman iÃ§inde kendini nasÄ±l taÅŸÄ±dÄ±ÄŸÄ±na odaklanman. Her Ã§ektiÄŸin fotoÄŸraf,
          bir Ã¶ncekinden <strong>yarÄ±m tÄ±k daha iyi</strong> olsun yeter.
        </p>
      `);
    }
  </script>
</body>
</html>
